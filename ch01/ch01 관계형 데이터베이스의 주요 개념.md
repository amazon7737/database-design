
데이터모델을 설계할 때는 다음과 같은 과정을 따른다.

- 설계를 위한 준비

- 업무 분석(ch05)

- 논리적 DB 설계

- 물리적 DB 설계(ch11)

- 데이터베이스 구축(ch12)


## 데이터베이스의 역사

#### 파일 시스템의 위기

컴퓨터 분야에서 어떤 개념을 이해하고자 할 때 좋은 방법 중의 하나는 그 개념이 나오게 된 배경과 역사를 살펴보는 것이다. 1946년 최초의 전자식 컴퓨터인 에니악(ENIAC)이 개발된 이후 컴퓨터 발전의 역사는 데이터 처리의 발전사와 그 맥을 함께하였다.

EDPS(Electronic Data Processing System)이라는 용어는 컴퓨터와 데이터 처리가 얼마나 밀접한 관계가 있었는지 보여준다.

제 1세대 컴퓨터들은 주로 계산, 자료 분류용도로 쓰였고, 2세대 컴퓨터가 등장하면서부터 자료를 분석하고 처리하는 일에 사용되기 시작하였다.

이때 파일(File)이라는 개념은 자료를 저장하는 기본적인 방법으로 사용되였고 오늘날까지 널리 이용되고 있다. 파일을 기초로하여 자료나 정보를 처리하는 시스템을 파일 시스템(File System)이라고 부른다.

파일에 접근하고 기록, 갱신, 삭제를 할 수 있으며 파일에 있는 데이터의 올바른 관리 여부는 전적으로 응용프로그램에 의해서 이루어진다.

각 기업들은 이러한 컴퓨터 시스템을 비즈니스 업무에 효과적으로 적용하도록 정보시스템을 구축하기 시작하는데, 컴퓨터 저장 장치에는 방대한 양의 데이터들이 축적되기 시작하엿고 데이터가 급속히 증가하면서 하드웨어나 소프트웨어의 성능 향상이 이루어져도 문제점들이 드러나기 시작했다.

#### 데이터 종속성(data dependency)⭐️

데이터를 사용하는 프로그램의 구조가 데이터 구조 (파일 구조)의 영향을 받는다는 것을 의미한다.

학생의 이름을 저장하는 필드의 길이를 20자리에서 30자리로 늘려야 하는 경우가 생기면 모든 프로그램을 변경해야 하는 문제가 생긴다.

필드의 순서를 바꾸어 저장하고자 하는 경우에도 프로그램을 변경해야 한다.

데이터 종속성은 프로그램의 개발과 유지보수를 어렵게 한다.

#### 데이터 무결성(data integrity) 침해⭐️

저장된 데이터의 내용이 본래 의도했던 데이터의 형식, 범위를 준수해야 한다는 성질이다.

#### 데이터 중복성 (data redundancy)

데이터가 여러 곳에 중복하여 저장되는 것을 의미한다.

#### 데이터 불일치 (data inconsistency)⭐️

중복 저장된 데이터들이 서로 일치하지 않는 것을 말한다.

#### 데이터 표준화(data standard)의 어려움

개발자 A는 S-NAME , 개발자 B는 SNME으로 사용한다면 제3자가 프로그램을 이해하기도 어렵고 두 프로그램 간의 호환성에도 문제가 된다.

#### 데이터 보안성(data security)의 결여

응용 프로그램 없이도 쉽게 파일을 열어 내용을 볼 수가 있고 파일의 공유를 위해 접근이 쉬운 위치에 파일을 저장했기 때문에 보안을 유지하기가 어려웠다.



### 데이터베이스의 등장

파일 시스템의 단점을 극복하고 다수의 사용자들이 정보를 공유할 수 있어야 한다는 것에 맞춰서 데이터베이스 개념이 등장했다.

데이터베이스의 철학은 간단하다.

하나로 모아 데이터를 관리하자
데이터의 집합을 데이터베이스(database), 데이터를 관리하는 S/W를 데이터베이스 관리 시스템(DBMS: Data Management System)

### 데이터베이스의 특징


#### 데이터 독립성(independency) 지원 <-> 종속성

반드시 DBMS를 통해서만 접근이 가능하다.

#### 데이터 무결성 유지

-> 데이터베이스 시스템은 무결성을 지원한다.

#### 데이터 중복성 및 불일치 최소화

-> 일관성을 가지게 된다

#### 데이터 표준화의 용이성

#### 높은 데이터 보안성

#### 데이터 공유(data sharing)의 용이성 == 동시성


## 관계형 데이터베이스 용어

### 릴레이션(relation)

관계형 데이터베이스에서 정보를 구분하여 저장하는 기본 단위

단, 같은 이름을 가진 릴레이션이 존재할 수 없다.

= 테이블
### 속성(attribute)

표현할 개체의 구체적인 정보 항목에 해당하는 것

= 컬럼, 열

### 튜플(tuple)

그 개체에 속한 구성원들 개개의 정보를 표현한다고 할 수 있다.

= 행

### 도메인(domain)

릴레이션에 포함된 각각의 속성들이 가질 수 있는 값들의 집합

= 값이 들어갈 수 있는 범위

##### 도메인이라는 개념이 필요한 이유?

릴레이션에 저장되는 데이터 값들이 본래 의도했던 값들만 저장되고 관리되도록 하는 데 있다.


### 기본키와 외래키

요약 : 기본키의 제약조건은 중복이 없어야 하고 null값은 가질 수 없고, 외래키의 제약조건은 참조할 수 없는 값은 가질 수 없다.

##### 어떻게 중복 여부를 효과적으로 확인할 수 있을까?

해답은 후보키(Candidate Key)이다.

후보키(Candidate Key)란 테이블에서 각 튜플을 구별하는 데 기준이 되는 하나 혹은 그 이상의 컬럼들의 집합이다. (후보키는 테이블에 있는 각 튜플을 고유하게 식별할 수 있어야 한다.)

후보키에는 기본키와 대체키가 있다.

기준으로 선택받은 후보키는 기본키가 되고 나머지는 대체키가 된다.

기본키가 2개이상이면 복합키(Composite Key) (잘안씀)

20201234 김철수

20202020 김철수

가 있을때, 학번과 학생이름이 기본키이면 다른 학번 같은 이름 김철수가 들어오므로 데이터 무결성이 침해가 된다.

학생이름은 기본키인데 이미 김철수가 2명이기 때문에 유일성을 어긋난다.

따라서 기본키를 2개이상 두는 경우는 매우 드물다.



![img](https://github.com/amazon7737/box/blob/main/CS/db/%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%80%E1%85%A8%20%E1%84%86%E1%85%B5%E1%86%BE%20%E1%84%80%E1%85%AE%E1%84%8E%E1%85%AE%E1%86%A8/Pasted%20image%2020240616210002.png)


##### 이와 같이 어떤 테이블에 외래키가 설정되어 있으면 어떤 좋은 점이 있을까?

존재하지 않는 부서에 대한 사원 정보를 추가할려고할때 외래키로 인해서 알아서 보호할 것이다. 그러므로 데이터 무결성을 유지할 수 있다.


### 만일 무결성이 깨진다면?

몇가지 조치를 취할 수 있다

#### 제한(restricted)

연산을 거절시킨다

#### 연쇄(cascade)

삭제연산을 수행할때 연관된 튜플들을 모두 삭제 시킨다

#### 널값으로 대체(nullify)

없어진 데이터에 대해서 null 값으로 바꾸어준다.


이와 같이 외래키를 통해서 두 테이블 간의 데이터 무결성을 유지하는 것을 참조 무결성 제약조건 이라고 한다.


#### 자기 참조(self reference)


한 테이블이 자신을 참조하는 경우가 있다 이러한 것을 자기 참조라고 한다.


### 뷰

하나의 테이블, 혹은 여러 테이블에 대하여 특정 사용자나 조직의 관점에서 데이터를 바라볼 수 있도록 해주는 수단으로서 가상 테이블을 말한다.


![img](https://github.com/amazon7737/box/blob/main/CS/db/%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%80%E1%85%A8%20%E1%84%86%E1%85%B5%E1%86%BE%20%E1%84%80%E1%85%AE%E1%84%8E%E1%85%AE%E1%86%A8/Pasted%20image%2020240616210823.png)


각 부서마다 하나의 테이블에 대하여 서로 다른 관점으로 보기를 원할 때 이러한 뷰를 이용해서 같은 테이블이지만 다른 모양으로 만들어 줄 수 있다.

테이블에 급여와 같이 일반 사용자에게는 감추어야하는 컬럼이 있을 때 그것을 제외하고 뷰를 만들어 제공하여 보안을 유지

자주 사용하는 복잡한 질의문을 뷰로 정의하여 두고 간편하게 쓸 수 있다.


#####  뷰에 대해서도 튜플의 삽입과 삭제가 가능한가?

null 값이 허용하는가에 달려 있다.

뷰에 대하여 삽입과 삭제가 불가능하다.

### Query

```SQL
SELECT * FROM USER

INSERT INTO USER (userId, userName, createDate) VALUES (100, "김강민", 2020-01-01);

UPDATE USER SET userId=101 WHERE userName = "김강민";

DELETE FROM USER WHERE userId = 100;

```


